<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Art Generator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <!-- p5.js-svg library - using unpkg CDN -->
    <script src="https://unpkg.com/p5.js-svg@1.5.1/dist/p5.svg.min.js"></script>
    <script>
        // Verify p5.SVG loads - check multiple times
        function checkP5SVG() {
            if (typeof p5 !== 'undefined') {
                // Check if p5.SVG is available as a property
                const hasSVG = typeof p5.SVG !== 'undefined' || 
                              (typeof window !== 'undefined' && typeof window.SVG !== 'undefined') ||
                              (typeof SVG !== 'undefined');
                
                if (hasSVG) {
                    console.log('тЬЕ p5.SVG loaded successfully');
                    console.log('p5.SVG type:', typeof p5.SVG);
                    console.log('SVG type:', typeof SVG);
                } else {
                    console.error('тЭМ p5.SVG failed to load!');
                    console.error('p5 available:', typeof p5 !== 'undefined');
                    console.error('p5.SVG available:', typeof p5.SVG !== 'undefined');
                    console.error('window.SVG available:', typeof window !== 'undefined' && typeof window.SVG !== 'undefined');
                    console.error('SVG global available:', typeof SVG !== 'undefined');
                }
            } else {
                console.warn('p5 not loaded yet, will check again...');
                setTimeout(checkP5SVG, 200);
            }
        }
        
        window.addEventListener('load', () => {
            setTimeout(checkP5SVG, 500);
            setTimeout(checkP5SVG, 1000);
            setTimeout(checkP5SVG, 2000);
        });
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <video class="bg-video" autoplay muted loop playsinline poster="img/bg-poster.jpg">
        <source src="vid/sunray-through-clouds.mp4" type="video/mp4">
    </video>

    <!-- Full-screen dim background shown behind email dialog -->
    <div id="emailOverlay" class="email-overlay" style="display: none;"></div>

    <div class="marquee marquee-header">
        <div class="marquee__track">
            <div class="marquee__content">
                <span>GALERIE PRINCE TAKAMADO GALLERY</span>
                <span>уВлуГКуГАхдзф╜┐щдищлШхЖЖхоошиШх┐╡уВоуГгуГйуГкуГ╝</span>
                <span>GALERIE PRINCE TAKAMADO GALLERY</span>
                <span>уВлуГКуГАхдзф╜┐щдищлШхЖЖхоошиШх┐╡уВоуГгуГйуГкуГ╝</span>
                <span>GALERIE PRINCE TAKAMADO GALLERY</span>
                <span>уВлуГКуГАхдзф╜┐щдищлШхЖЖхоошиШх┐╡уВоуГгуГйуГкуГ╝</span>
                <span>GALERIE PRINCE TAKAMADO GALLERY</span>
                <span>уВлуГКуГАхдзф╜┐щдищлШхЖЖхоошиШх┐╡уВоуГгуГйуГкуГ╝</span>
            </div>
            <div class="marquee__content" aria-hidden="true">
                <span>GALERIE PRINCE TAKAMADO GALLERY</span>
                <span>уВлуГКуГАхдзф╜┐щдищлШхЖЖхоошиШх┐╡уВоуГгуГйуГкуГ╝</span>
                <span>GALERIE PRINCE TAKAMADO GALLERY</span>
                <span>уВлуГКуГАхдзф╜┐щдищлШхЖЖхоошиШх┐╡уВоуГгуГйуГкуГ╝</span>
                <span>GALERIE PRINCE TAKAMADO GALLERY</span>
                <span>уВлуГКуГАхдзф╜┐щдищлШхЖЖхоошиШх┐╡уВоуГгуГйуГкуГ╝</span>
                <span>GALERIE PRINCE TAKAMADO GALLERY</span>
                <span>уВлуГКуГАхдзф╜┐щдищлШхЖЖхоошиШх┐╡уВоуГгуГйуГкуГ╝</span>
            </div>
        </div>
    </div>
    <div class="main-section">
        <div class="site-logo" id="logoBtn"></div>
        <div class="header-container">
            <h1>ЁЯМдя╕П хдйхАЩуВвуГ╝уГИуВ╕уВзуГНуГмуГ╝уВ┐уГ╝</h1>
            <div class="header-translations">
                <h2 class="header-en">Weather Art Generator</h2>
                <span class="header-separator">тЬ┐</span>
                <h2 class="header-fr">G├йn├йrateur d'Art M├йt├йo</h2>
            </div>
        </div>
        <div class="container">
        <div class="subtitle-grid">
            <p class="subtitle lang-ja">уБУуБох▒Хчд║ф╝ЪщЩРхоЪя╝БуВкуВ┐уГпуБицЭ▒ф║муБохдйхАЩуБлуВдуГ│уВ╣уГСуВдуВвуБХуВМуБЯEEPMONуБлуВИуВЛуГжуГЛуГ╝уВпуБкуГЗуВ╕уВ┐уГлуВвуГ╝уГИф╜ЬхУБуВТхЕецЙЛуБЧуВИуБЖуАВ</p>
            <p class="subtitle lang-en">Exclusive to this exhibition! Own a unique digital artwork by EEPMON, inspired by the weather of Ottawa and Tokyo.</p>
            <p class="subtitle lang-fr">Exclusif ├а cette exposition ! Poss├йdez une ┼Уuvre d'art num├йrique unique d'EEPMON, inspir├йe par le climat d'Ottawa et de Tokyo.</p>
        </div>
        
        <button id="generateBtn" class="btn">чФЯцИР | Generate | G├йn├йrer</button>

        <div class="artwork-section">
            <div class="weather-sidebar" id="weatherSidebar" style="display: none;">
                <div class="weather-card" id="ottawaCard">
                    <h3>ЁЯЗиЁЯЗж уВлуГКуГАуГ╗уВкуВ┐уГп / Ottawa (Canada)</h3>
                    <div id="ottawaWeather"></div>
                </div>
                <div class="weather-card" id="tokyoCard">
                    <h3>ЁЯЗпЁЯЗ╡ цЧецЬмуГ╗цЭ▒ф║м / Tokyo (Japon)</h3>
                    <div id="tokyoWeather"></div>
                </div>
                <div class="action-buttons" id="actionButtons" style="display: none;">
                    <button id="generateAgainBtn" class="btn secondary">хЖНчФЯцИР | Generate Again | G├йn├йrer ├а nouveau</button>
                    <button id="acceptGiftBtn" class="btn success">хПЧуБСхПЦуВЛ | Accept | Accepter</button>
                </div>
            </div>
            
            <div id="artwork-container">
                <div id="artwork-sketch"></div>
                <div class="loading-overlay" id="loadingOverlay" style="display: none;">
                    <div class="loading-content">
                        <div class="spinner"></div>
                        <p>Fetching weather data and generating artwork...</p>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </div>

    <!-- Centered email dialog, above overlay and main content -->
    <div class="email-form" id="emailForm">
        <h2 class="subtitle">хдйц░ЧчЩ║цГ│уБоуВ╕уВзуГНуГйуГЖуВгуГЦуВвуГ╝уГИуВТхПЧуБСхПЦуВНуБЖя╝Б</h2>
        <h3 class="subtitle">Receive Your Weather Inspired Generative Art!<br>
            Recevez votre ┼Уuvre g├йn├йrative inspir├йe par la m├йt├йo !</h3>
        <!--<p>Enter your email to receive your unique generative artwork as an attachment:</p>-->
        <input type="email" id="emailInput" placeholder="your.email@example.com" required>
        <button id="submitEmailBtn" class="btn">щАБф┐б | Send | Envoyer</button>
    </div>

    <!-- Message display (grouped with email-form for high z-index) -->
    <div class="message" id="message"></div>

    <div class="sponsor-logos">
        <img src="img/air-canada-logo.svg" alt="Sponsor 1" class="sponsor-logo">
        <img src="img/canada-goose-logo.svg" alt="Sponsor 2" class="sponsor-logo">
    </div>

    <div class="marquee">
        <div class="marquee__track">
            <div class="marquee__content">
                <span>GALERIE PRINCE TAKAMADO GALLERY</span>
                <span>уВлуГКуГАхдзф╜┐щдищлШхЖЖхоошиШх┐╡уВоуГгуГйуГкуГ╝</span>
                <span>GALERIE PRINCE TAKAMADO GALLERY</span>
                <span>уВлуГКуГАхдзф╜┐щдищлШхЖЖхоошиШх┐╡уВоуГгуГйуГкуГ╝</span>
                <span>GALERIE PRINCE TAKAMADO GALLERY</span>
                <span>уВлуГКуГАхдзф╜┐щдищлШхЖЖхоошиШх┐╡уВоуГгуГйуГкуГ╝</span>
                <span>GALERIE PRINCE TAKAMADO GALLERY</span>
                <span>уВлуГКуГАхдзф╜┐щдищлШхЖЖхоошиШх┐╡уВоуГгуГйуГкуГ╝</span>
            </div>
            <div class="marquee__content" aria-hidden="true">
                <span>GALERIE PRINCE TAKAMADO GALLERY</span>
                <span>уВлуГКуГАхдзф╜┐щдищлШхЖЖхоошиШх┐╡уВоуГгуГйуГкуГ╝</span>
                <span>GALERIE PRINCE TAKAMADO GALLERY</span>
                <span>уВлуГКуГАхдзф╜┐щдищлШхЖЖхоошиШх┐╡уВоуГгуГйуГкуГ╝</span>
                <span>GALERIE PRINCE TAKAMADO GALLERY</span>
                <span>уВлуГКуГАхдзф╜┐щдищлШхЖЖхоошиШх┐╡уВоуГгуГйуГкуГ╝</span>
                <span>GALERIE PRINCE TAKAMADO GALLERY</span>
                <span>уВлуГКуГАхдзф╜┐щдищлШхЖЖхоошиШх┐╡уВоуГгуГйуГкуГ╝</span>
            </div>
        </div>
    </div>

    <script src="artwork.js"></script>
    <script src="app.js"></script>
</body>
</html>
